{% extends 'base.html.twig' %}

{% block title %}Grimpeurs{% endblock %}

{% block pageTitle %}

    {% if ville is defined %}
        Grimpeurs à {{ ville.nom }}
    {% elseif likes is defined and likes %}
        Ceux qui aiment cette publication
    {% elseif event is defined and event %}
        Utilisateurs intéressés
    {% elseif search %}
        Chercher des utilisateurs
    {% endif %}


{% endblock %}

{% block body %}

<!-- Liens vers les pages de rechereche -->
<div class="row justify-content-center justify-content-lg-end">
    <div class="button-block col-10 mt-3 ml-lg-5 p-2 ">
        <div class="row justify-content-center">
            <a class="col-10 col-lg-3 btn event-button" href="{{ path('event-search') }}">Chercher des évènements</a>
            <a class="col-10 col-lg-3 btn post-button" href="{{ path('post-search') }}">Chercher des publications</a>
            <a class="col-10 col-lg-3 btn club-button" href="{{ path('club-search') }}">Chercher des salles d'escalade</a>
        </div>
    </div>    
</div>

{% if search %}

<!-- Formulaire pour chercher des utilisateurs -->
<div class="row justify-content-center justify-content-lg-end">
    <div class="search-form-block col-10 mt-3 ml-lg-5 p-2 ">
        <div class="row justify-content-center p-2">
            {{ form_start(form) }}
            <div class="col-12">
                
                <div class="row justify-content-center">
                    <div class="col-10">
                        {{ form_row(form.firstName) }}
                    </div>
                    <div class="col-10">
                        {{ form_row(form.lastName) }}
                    </div>
                </div>
                <div class="row justify-content-center">
                    <div class="col-10">
                        {{ form_row(form.ville) }}
                    </div>
                    <div class="col-10 text-center">
                         <input type="submit" class="btn submit-button" value="Rechercher">
                    </div>
                </div>
            </div>
             {{ form_end(form) }}
        </div>
    </div>    
</div>
{% endif %}

<div class="row justify-content-center justify-content-lg-end">
    <div class="col-10 mt-3 ml-lg-5 p-2 ">
        <div class="row justify-content-center">
            <!-- La liste des utilisateur -->
            {% for user in users %}
                    <div class="cardd p-0 col-md-5 col-lg-3 m-2 text-center">
                        <!-- Photo de profil -->
                        <div class="row justify-content-center">
                            <div class="img-cadre m-5">
                                {% if user.image %}
                                    <img class="card-image" src="{{ asset('upload/users/' ~ user.image) }}" alt="">
                                {% else %}
                                    <img class="card-image" src="{{ asset('upload/default.png') }}" alt="">
                                {% endif %}
                            </div>
                        </div>
                        <!-- Nom -->
                        <div class="card-title"><a href="{{ path('single-user',{'id' : user.id}) }}">{{ user.firstName }} {{ user.lastName }}</a></div>
                        <!-- Ville -->
                        <div class="card-text">
                            <div>{{ user.ville.nom }}</div>
                        </div>
                        <!-- Présentation -->
                        <div class="presentation m-2">
                            <p>{{ user.presentation }}</p>
                        </div>
                        <!-- Liens -->
                        <div class="col-12 p-0">
                            <div class="row buttons justify-content-center no-gutters p-2">
                                <a class="col-10 m-2 btn profil-button" href="{{ path('single-user',{'id' : user.id}) }}">Voir profile</a>
                                <a class="col-10 m-2 btn invitation-button" href="">Envoyer une invitation</a>
                                <a class="col-10 m-2 btn message-button" href="">Envoyer un message</a>
                            </div>
                        </div> 
                    </div>
                
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}
