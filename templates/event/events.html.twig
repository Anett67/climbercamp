{% extends 'base.html.twig' %}

{% block title %}Évènements{% endblock %}

{% block pageTitle %}

    {% if user is defined %}
        Évènements qui intéressent {{ user.firstName }}
    {% elseif ville is defined %}
        Évènements organisés à {{ ville.nom }}
    {% endif %}


{% endblock %}

{% block body %}

    <div class="row justify-content-center justify-content-lg-end">
        <div class="button-block col-10 col-lg-9 mt-3 p-2 ">
            <div class="row justify-content-center">
                <a class="col-10 col-lg-3 btn grimpeur-button" href="{{ path('user-search') }}">Chercher des grimpeurs</a>
                <a class="col-10 col-lg-3 btn post-button" href="{{ path('post-search') }}">Chercher des publications</a>
                <a class="col-10 col-lg-3 btn club-button" href="{{ path('club-search') }}">Chercher des salles d'escalade</a>
            </div>
        </div>    
    </div>
     
    <div class="row justify-content-center justify-content-lg-end mt-5">
        <div class=" events-block col-10 col-lg-9 justify-content-center">
            {% if user is not defined %}    
                <div class="row justify-content-center">
                    <div class="col-10 mt-3 p-2 ">
                        <p class="text-center">Bloc du nouveau formulaire</p>
                    </div>
                    <div class="col-10">
                        <hr>
                    </div>
                </div>
            {% else %}
                <div class="col-10 mt-3 p-2">
                     {{ user.firstName }} n'a aucun évènement enregistré
                </div>
            {% endif %}
            <div class="row justify-content-center pb-5">
                {% for event in events %}
                    <div class="event-block col-10 mt-3 p-3 mb-3">
                        <div class="row">
                            <div class="col-12 col-lg-8">
                                <div class="row justify-content-center justify-content-lg-start">
                                    {% if event.image %}
                                        <div class="col-11 col-md-4 mb-2">
                                            <img class="event-image" src="{{ asset('build/images/events/' ~ event.image ) }}" alt="Image">
                                        </div>
                                    {% endif %}
                                    <div class="col-11 {% if event.image %}col-md-8{% endif %}">
                                        <div class="row">
                                            <div class="col-10">
                                                <a href="{{ path('single-event', {'id': event.id}) }}"><h4>{{ event.title }}</h4></a>
                                            </div>
                                            <div class="event-details col-10">
                                                {{ event.ville.nom }}   
                                            </div>
                                            <div class="col-10 date">le {{ event.eventDate|date("d/m/Y à H:i") }}</div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                            <div class="col-12 col-lg-4">
                                <div class="row align-items-center">
                                    <div class="col-9 col-md-10 col-lg-8 text-right pr-0">
                                        <div class="postedByName">Partagé par 
                                            <div>
                                                <a href="{{ path('single-user',{'id' : event.postedBy.id}) }}" class="m-0">{{ event.postedBy.firstName }} {{ event.postedBy.lastName }}</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-3 col-sm-2 col-md-2 col-lg-4">
                                        <img class="postedByImage" src="{{ asset('build/images/' ~ event.postedBy.image ) }}" alt="">
                                    </div>
                                </div>
                            </div>                       
                        </div>
                            <div class="row justify-content-center justify-content-lg-end align-items-end">
                                <div class="col-12 col-lg-6 ">
                                    <div class="row justify-content-center justify-content-md-start">
                                        <div class=" col-11">
                                            <a class="commentsAndUsers" href="{{ path('event-users', {'id': event.id}) }}">{{ event.interestedUsers|length }} Personnes sont intéressées</a>
                                        </div>
                                        <div class=" col-11">
                                            <a class="commentsAndUsers" href="">{{ event.eventComments|length }} Commentaires</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-lg-6">
                                    <div class="row justify-content-end">
                                        <div class="col-11 col-md-6 col-lg-6 m-2 m-2">
                                            <a class="btn save-button" href="">ENREGISTRER</a>
                                        </div>
                                        <div class="col-11 col-md-6 col-lg-6 m-2">
                                            <a class="btn info-button" href="{{ path('single-event', {'id': event.id}) }}">INFO</a>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                    </div>
                {% endfor %}
            </div>  
        </div>
        
    </div>
    




{% endblock %}